# Railway Nixpacks configuration for monorepo
# This tells Railway to build from apps/backend directory

[phases.setup]
nixPkgs = ["nodejs-18_x"]

[phases.install]
cmds = [
  "cd apps/backend",
  "NODE_ENV=development npm ci",
  "npm run build"
]

# Skip Chrome installation during build to avoid build failures
# Chrome will be installed at runtime if needed (handled in code)
[phases.build]
cmds = [
  "echo 'Build complete. Chrome will be installed at runtime if needed.'"
]

[start]
cmd = "cd apps/backend && npm start"

